
@{
    ViewBag.Title = "输入合同信息";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h3 class="text-center">录入合同</h3>

<form class="form-horizontal" id="Contract" action="/Finance/SaveContract" method="post">
    <input type="hidden" name="Creator" value="@(Identity.Name)" />
    <div class="form-group">
        <label class="control-label col-md-3">合同编号:</label>
        <div class="col-md-8">
            <input type="text" class="form-control" name="Coding" />
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-md-3">合同名称:</label>
        <div class="col-md-8">
            <input type="text" class="form-control" name="Name" />
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-md-3">签署单位：</label>
        <div class="col-md-8">
            <select name="ZtopCompany" class="form-control">
                @foreach(ZtopCompany company in Enum.GetValues(typeof(ZtopCompany)))
                {
                    <option value="@(company)">@(company.GetDescription())</option>
                }
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-md-3">对方单位:</label>
        <div class="col-md-8">
            <input type="text" class="form-control" name="Company" />
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-8 col-md-offset-3">
            <button type="submit" class="btn btn-primary"><i class="glyphicon glyphicon-ok"></i> 录入</button>
        </div>
    </div>
</form>


<script>
    $(function () {

        $("#Contract").submit(function () {
            var data = $(this).serialize();
            $.request("/Finance/SaveContract", data, function (json) {
                alert("成功创建项目合同!");
                location.href = "/Finance/Detail?id=" + json.data;
            });
            return false;
        })
    })
</script>
